<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Gallos Mármol - Especialistas en mármol, granito y cuarzo para tus proyectos residenciales y comerciales. Calidad y elegancia en acabados de piedra natural.">
    <meta name="keywords" content="mármol, granito, cuarzo, acabados de lujo, diseño de interiores, cocinas de mármol, baños de mármol, pisos de mármol">
    <link rel="icon" type="image/x-icon" href="../../FOTOS/ICONOS/Icono_6.ico">
    <title>Gallos Mármol</title>
    <link rel="preload" href="../../FOTOS/OTROS/Foto_2.webp" as="image">
    <link rel="preload" href="../../FOTOS/OTROS/Foto_1.webp" as="image">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Variables CSS para modo claro/oscuro */
        :root {
            --bg-color: #f9f9f9;
            --text-color: #000000;
            --primary-color: #CB3E2C;
            --secondary-color: #000000;
            --card-bg: #ffffff;
            --header-bg: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --overlay-color: rgba(0, 0, 0, 0.6);
            --modal-bg: rgba(0, 0, 0, 0.95);
            --btn-hover: #CB3E2C;
            --btn-text: white;
            --section-bg: #ffffff;
            --empty-state-bg: #f9f9f9;
        }

        /* Modo oscuro */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #121212;
                --text-color: #ffffff;
                --primary-color: #E53935;
                --secondary-color: #CB3E2C;
                --card-bg: #1e1e1e;
                --header-bg: #1e1e1e;
                --shadow-color: rgba(0, 0, 0, 0.3);
                --overlay-color: rgba(0, 0, 0, 0.8);
                --modal-bg: rgba(30, 30, 30, 0.98);
                --btn-hover: #121212;
                --btn-text: #ffffff;
                --section-bg: #121212;
                --empty-state-bg: #2d2d2d;
            }

            /* Ajustes específicos para modo oscuro */
            .hero-content h1, .hero-content p {
                text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
            }

            .gallery-card-overlay {
                background: linear-gradient(to top, rgba(30, 30, 30, 0.9), transparent);
            }
        }

        /* Reset y estilos generales */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
            background-color: var(--bg-color);
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-block;
            padding: 12px 30px;
            background-color: var(--secondary-color);
            color: var(--btn-text);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            margin-top: 10px;
            text-align: center;
        }

        .btn:hover {
            background-color: var(--btn-hover);
            transform: translateY(-2px);
        }

        .btn2 {
            display: inline-block;
            padding: 12px 30px;
            background-color: var(--text-color);
            color: var(--bg-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            margin-top: 10px;
            width: auto;
            min-width: 200px;
        }

        .btn2:hover {
            background-color: var(--primary-color);
            transform: translateY(-2px);
        }

        section {
            padding: 80px 0;
            background-color: var(--section-bg);
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 2.5rem;
            color: var(--text-color);
            position: relative;
        }

        .section-title:after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background-color: var(--primary-color);
            margin: 15px auto;
        }

        /* Header y navegación */
        header {
            background-color: var(--header-bg);
            position: fixed;
            width: 100%;
            z-index: 1000;
            padding: 15px 0;
            transition: all 0.3s ease;
        }

        .header-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo img {
            height: 50px;
            margin-right: 10px;
        }

        /* Hero Section */
        #inicio {
            padding-top: 120px;
            background: linear-gradient(var(--overlay-color), var(--overlay-color)), url('../../FOTOS/OTROS/Foto_2.webp') no-repeat center center/cover;
            color: white;
            min-height: 100vh;
            display: flex;
            align-items: center;
            text-align: center;
            margin-top: -40px;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        /* About Section */
        .about-content {
            display: flex;
            align-items: center;
            gap: 50px;
        }

        .about-text {
            flex: 1;
        }

        .about-text h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--text-color);
            text-align: center;
        }

        .about-text p {
            margin-bottom: 20px;
            text-align: justify;
        }

        .about-image {
            flex: 1;
            border-radius: 8px;
            overflow: hidden;
        }

        .about-image img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s ease;
        }

        .about-image:hover img {
            transform: scale(1.05);
        }

        /* Sección Ventajas Competitivas */
        #ventajas {
            background-color: var(--section-bg);
        }

        .ventajas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .ventaja-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-align: center;
        }

        .ventaja-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 5px 10px var(--shadow-color);
        }

        .ventaja-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .ventaja-card h3 {
            margin-bottom: 15px;
            color: var(--text-color);
        }

        /* Sección Sostenibilidad */
        #sostenibilidad {
            background-color: var(--section-bg);
        }

        .sostenibilidad-content {
            display: flex;
            align-items: center;
            gap: 50px;
        }

        .sostenibilidad-text {
            flex: 1;
        }

        .sostenibilidad-text p {
            margin-bottom: 20px;
            text-align: justify;
        }

        .sostenibilidad-image {
            flex: 1;
            border-radius: 8px;
            overflow: hidden;
        }

        .sostenibilidad-image img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s ease;
        }

        .sostenibilidad-image:hover img {
            transform: scale(1.05);
        }

        /* Sección Galería de Fotos */
        #galeria {
            background-color: var(--section-bg);
        }

        .gallery-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(370px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .gallery-card {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            aspect-ratio: 16/9;
        }

        .gallery-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-card:hover img {
            transform: scale(1.05);
        }

        .gallery-card-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            color: white;
            padding: 20px;
            transition: transform 0.3s ease;
        }

        .gallery-card-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .gallery-card-desc {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Modal de Galería de Fotos */
        .gallery-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--modal-bg);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .gallery-modal.active {
            display: flex;
            opacity: 1;
        }

        .gallery-modal-content {
            width: 100%;
            position: relative;
        }

        .gallery-modal-header {
            position: absolute;
            top: -60px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            z-index: 2001;
        }

        .gallery-modal-title {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .gallery-modal-desc {
            font-size: 1rem;
            opacity: 0.8;
        }

        .close-gallery-modal {
            position: fixed;
            top: 30px;
            right: 30px;
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            z-index: 2001;
            background: #CB3E2C;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .gallery-slider {
            display: flex;
            transition: transform 0.5s ease;
            height: 80vh;
        }

        .gallery-slide {
            min-width: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .gallery-slide img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .gallery-slide-info {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 8px;
            max-width: 80%;
            margin: 0 auto;
        }

        .gallery-slide-title {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .gallery-slide-desc {
            font-size: 1rem;
            opacity: 0.9;
        }

        .gallery-nav {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            padding: 20px;
            z-index: 2001;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .gallery-nav:hover {
            background-color: var(--primary-color);
            transform: translateY(-50%) scale(1.1);
        }

        .prev-gallery {
            left: 30px;
        }

        .next-gallery {
            right: 30px;
        }

        .gallery-counter {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 1rem;
            z-index: 2001;
        }

        /* Sección Videos */
        #videos {
            background-color: var(--section-bg);
        }

        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .video-card {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            background: var(--card-bg);
        }

        .video-card.horizontal {
            aspect-ratio: 16/9;
        }

        .video-card.vertical {
            aspect-ratio: 9/16;
        }

        .video-card:hover {
            transform: translateY(-5px);
        }

        .video-thumbnail {
            position: relative;
            width: 100%;
            height: 70%;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .video-card.horizontal .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-card.vertical .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background-color: rgba(203, 62, 44, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
        }

        .play-button i {
            color: white;
            font-size: 2.5rem;
            margin-left: 5px;
            height: 50%;
            width: 60%;
        }

        .play-button:hover {
            background-color: var(--primary-color);
            transform: translate(-50%, -50%) scale(1.1);
        }

        .video-info {
            padding: 20px;
            height: 30%;
            text-align: justify;
        }

        .video-info h3 {
            margin-bottom: 10px;
            color: var(--text-color);
            font-size: 1.2rem;
        }

        .video-info p {
            color: var(--text-color);
            font-size: 0.9rem;
        }

        /* Modal de Video */
        .video-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--modal-bg);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .video-modal.active {
            display: flex;
            opacity: 1;
        }

        .video-modal.vertical-video .video-modal-content {
            max-width: 400px;
        }

        .video-modal-content {
            width: 90%;
            max-width: 1000px;
            position: relative;
        }

        .video-modal-header {
            position: absolute;
            top: -60px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            z-index: 3001;
        }

        .video-modal-title {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .video-modal-desc {
            font-size: 1rem;
            opacity: 0.8;
        }

        .close-video-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            background: #CB3E2C;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .video-modal.vertical-video .video-container {
            padding-bottom: 177.78%; /* 9/16 aspect ratio invertido */
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Estilos para estados vacíos */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background-color: var(--empty-state-bg);
            border-radius: 8px;
            margin: 20px 0;
        }

        .empty-icon {
            font-size: 4rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .empty-title {
            font-size: 1.5rem;
            color: var(--text-color);
            margin-bottom: 15px;
        }

        .empty-description {
            color: #aaa;
            max-width: 500px;
            margin: 0 auto;
        }

        /* Lazy loading */
        img[data-src] {
            opacity: 0;
        }

        img.lazy-loaded {
            opacity: 1;
        }

        /* Focus styles para navegación por teclado */
        a:focus, button:focus, .gallery-card:focus, .video-card:focus {
            outline: 3px solid var(--primary-color);
            outline-offset: 3px;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .about-content, .sostenibilidad-content {
                flex-direction: column;
            }
            
            .btn2 {
                width: 40%;
            }

            .gallery-slider {
                height: 60vh;
            }
        }

        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 2.5rem;
            }
            
            .btn2 {
                width: 60%;
            }

            .videos-grid {
                grid-template-columns: 1fr;
            }

            .gallery-nav, .close-gallery-modal {
                font-size: 2rem;
                padding: 15px;
                width: 50px;
                height: 50px;
            }

            .gallery-modal-header, .video-modal-header {
                top: -50px;
            }

            .gallery-modal-title, .video-modal-title {
                font-size: 1.5rem;
            }

            .gallery-slide-title {
                font-size: 1.2rem;
            }

            .gallery-counter {
                font-size: 0.9rem;
                padding: 6px 15px;
            }
        }

        @media (max-width: 576px) {
            .section-title {
                font-size: 2rem;
            }

            .hero-content h1 {
                font-size: 2rem;
            }

            .empty-icon {
                font-size: 2.5rem;
            }

            .empty-title {
                font-size: 1.1rem;
            }

            .btn2 {
                width: 80%;
            }

            .gallery-container {
                grid-template-columns: 1fr;
            }

            .gallery-slider {
                height: 50vh;
            }

            .gallery-nav {
                font-size: 1.8rem;
                padding: 12px;
                width: 45px;
                height: 45px;
            }

            .prev-gallery {
                left: 15px;
            }

            .next-gallery {
                right: 15px;
            }

            .play-button {
                width: 60px;
                height: 60px;
            }

            .play-button i {
                font-size: 2rem;
            }

            .gallery-slide-info {
                max-width: 90%;
                padding: 10px;
            }

            .gallery-slide-title {
                font-size: 1rem;
            }

            .gallery-slide-desc {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Contenedor para el menú que se cargará externamente -->
    <div id="menu-container"></div>

    <!-- Sección Inicio -->
    <section id="inicio">
        <div class="container">
            <div class="hero-content">
                <h1>Transforma tus espacios con la elegancia del mármol</h1>
                <p>En Gallos Mármol ofrecemos acabados de la más alta calidad para darle un toque de sofisticación a tu hogar o proyecto.</p>
                <a href="producto.html" class="btn2">Ver productos</a>
                <a href="../../ARCHIVOS/CATALOGO/Catalogo_2025.pdf" target="_blank" class="btn2">Descargar Catálogo</a>
            </div>
        </div>
    </section>

    <!-- Sección Sobre Nosotros -->
    <section id="about">
        <div class="container">
            <h2 class="section-title">Sobre Gallos Mármol</h2>
            <div class="about-content">
                <div class="about-text">
                    <h2>Más de 150 años de experiencia en el mercado</h2>
                    <p>En Gallos Mármol, transformamos mármol en piezas exclusivas que combinan elegancia, calidad y durabilidad.</p>
                    <p>Posicionados como referentes en acabados de alto nivel, ofreciendo soluciones a medida para hogares, empresas y proyectos arquitectónicos.</p>
                    <p>Nuestro compromiso con la excelencia y la atención al detalle nos permite ofrecer un servicio integral: desde la asesoría personalizada hasta la instalación final, asegurando resultados impecables y la total satisfacción de nuestros clientes.</p>
                </div>
                <div class="about-image">
                    <img src="../../FOTOS/OTROS/Foto_1.webp" alt="Cantera Gallos Mármol - Fachada de nuestra sede principal" loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- Sección Ventajas Competitivas -->
    <section id="ventajas">
        <div class="container">
            <h2 class="section-title">Ventajas Competitivas</h2>
            <div class="ventajas-grid">
                <div class="ventaja-card">
                    <div class="ventaja-icon">
                        <i class="fas fa-award"></i>
                    </div>
                    <h3>Calidad Garantizada</h3>
                    <p>Todos nuestros materiales pasan por rigurosos controles de calidad para asegurar durabilidad y excelencia en cada pieza.</p>
                </div>
                <div class="ventaja-card">
                    <div class="ventaja-icon">
                        <i class="fas fa-truck"></i>
                    </div>
                    <h3>Entrega Puntual</h3>
                    <p>Cumplimos con los plazos acordados gracias a nuestra logística optimizada y equipo de profesionales.</p>
                </div>
                <div class="ventaja-card">
                    <div class="ventaja-icon">
                        <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <h3>Precios Competitivos</h3>
                    <p>Ofrecemos la mejor relación calidad-precio del mercado, con opciones para todos los presupuestos.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección Sostenibilidad -->
    <section id="sostenibilidad">
        <div class="container">
            <h2 class="section-title">Responsabilidad Social</h2>
            <div class="sostenibilidad-content">
                <div class="sostenibilidad-text">
                    <p>Gallos Mármol explota canteras de un producto natural es decir trabaja en un ambiente libre de contaminantes. Nuestra responsabilidad abarca la minimización del impacto sobre el medio ambiente de los ecosistemas de la comunidad, e incluso la restauración de la tierra a su entorno natural después de terminada la explotación. Además trabajamos en conjunto con las comunidades para ayudarlas a desarrollar proyectos como: construcción de canales de riego, escuelas, carreteras e infraestructuras diversas; además de capacitar y formar a las personas con habilidades de trabajo para mejorar sus estándares, y ayudarlos a externalizar sus servicios.</p>
                </div>
                <div class="sostenibilidad-image">
                    <img src="../../FOTOS/OTROS/Foto_3.webp" alt="Cantera" loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- Sección Galería de Fotos -->
    <section id="galeria">
        <div class="container">
            <h2 class="section-title">Galería de Fotos</h2>
            <div class="gallery-container" id="photos-gallery">
                <!-- Las galerías se cargarán dinámicamente desde fotos.json -->
            </div>
        </div>
    </section>

    <!-- Sección Galería de Videos -->
    <section id="videos">
        <div class="container">
            <h2 class="section-title">Galería de Videos</h2>
            <div class="videos-grid" id="videos-gallery">
                <!-- Los videos se cargarán dinámicamente desde videos.json -->
            </div>
        </div>
    </section>

    <!-- Modal de Galería de Fotos -->
    <div class="gallery-modal" id="galleryModal">
        <span class="close-gallery-modal">&times;</span>
        <div class="gallery-modal-header">
            <h3 class="gallery-modal-title" id="galleryModalTitle"></h3>
            <p class="gallery-modal-desc" id="galleryModalDesc"></p>
        </div>
        <div class="gallery-nav prev-gallery"><i class="fas fa-chevron-left"></i></div>
        <div class="gallery-modal-content">
            <div class="gallery-slider" id="gallerySlider"></div>
        </div>
        <div class="gallery-nav next-gallery"><i class="fas fa-chevron-right"></i></div>
        <div class="gallery-counter" id="galleryCounter"></div>
    </div>

    <!-- Modal de Video -->
    <div class="video-modal" id="videoModal">
        <div class="video-modal-header">
            <h3 class="video-modal-title" id="videoModalTitle"></h3>
            <p class="video-modal-desc" id="videoModalDesc"></p>
        </div>
        <div class="video-modal-content">
            <span class="close-video-modal">&times;</span>
            <div class="video-container">
                <iframe id="videoFrame" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <!-- Script para cargar el menú dinámicamente -->
    <script src="../JS/cargarMenu.js"></script>

    <!-- Script principal mejorado -->
    <script>
        // Variables globales para las galerías
        let currentGallery = null;
        let currentSlideIndex = 0;
        let photosData = [];
        let videosData = [];
        
        // Lazy loading para imágenes
        function lazyLoadImages() {
            const lazyImages = document.querySelectorAll('img.lazy');
            
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.add('lazy-loaded');
                        observer.unobserve(img);
                    }
                });
            }, {
                rootMargin: '0px 0px 100px 0px'
            });

            lazyImages.forEach(img => {
                imageObserver.observe(img);
            });
        }

        // Cargar datos de fotos
        async function loadPhotos() {
            try {
                const response = await fetch('../JSON/fotos.json');
                photosData = await response.json();
                const photosContainer = document.getElementById('photos-gallery');
                
                if (photosData.galerias && photosData.galerias.length > 0) {
                    photosContainer.innerHTML = ''; // Limpiar contenedor
                    
                    photosData.galerias.forEach(gallery => {
                        const galleryCard = document.createElement('div');
                        galleryCard.className = 'gallery-card';
                        galleryCard.setAttribute('data-gallery-id', gallery.id);
                        galleryCard.innerHTML = `
                            <img data-src="${gallery.foto_principal}" alt="${gallery.titulo}" class="lazy">
                            <div class="gallery-card-overlay">
                                <h3 class="gallery-card-title">${gallery.titulo}</h3>
                                <p class="gallery-card-desc">${gallery.descripcion}</p>
                            </div>
                        `;
                        photosContainer.appendChild(galleryCard);
                        
                        // Agregar evento click a cada tarjeta de galería
                        galleryCard.addEventListener('click', () => openGalleryModal(gallery.id));
                    });
                } else {
                    photosContainer.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">
                                <i class="fas fa-camera"></i>
                            </div>
                            <h2 class="empty-title">No hay galerías disponibles</h2>
                            <p class="empty-description">Actualmente no tenemos galerías disponibles. Vuelve a visitarnos pronto para ver nuestro trabajo.</p>
                        </div>
                    `;
                }
                
                lazyLoadImages();
            } catch (error) {
                console.error('Error al cargar las fotos:', error);
                document.getElementById('photos-gallery').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h2 class="empty-title">Error al cargar las galerías</h2>
                        <p class="empty-description">No pudimos cargar la información de las galerías. Por favor, intenta nuevamente más tarde.</p>
                    </div>
                `;
            }
        }

        // Abrir modal de galería
        function openGalleryModal(galleryId) {
            currentGallery = photosData.galerias.find(g => g.id === galleryId);
            if (!currentGallery || !currentGallery.fotos || currentGallery.fotos.length === 0) return;
            
            currentSlideIndex = 0;
            const modal = document.getElementById('galleryModal');
            const slider = document.getElementById('gallerySlider');
            const counter = document.getElementById('galleryCounter');
            
            // Limpiar slider y agregar fotos
            slider.innerHTML = '';
            currentGallery.fotos.forEach((photo, index) => {
                const slide = document.createElement('div');
                slide.className = 'gallery-slide';
                slide.innerHTML = `
                    <img src="${photo.imagen}" alt="${photo.titulo}">
                `;
                slider.appendChild(slide);
            });
            
            // Actualizar contador
            counter.textContent = `${currentSlideIndex + 1} / ${currentGallery.fotos.length}`;
            
            // Mostrar modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Posicionar slider
            updateSliderPosition();
        }

        // Cerrar modal de galería
        function closeGalleryModal() {
            const modal = document.getElementById('galleryModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Navegación entre slides
        function navigateSlide(direction) {
            if (!currentGallery) return;
            
            if (direction === 'prev') {
                currentSlideIndex = (currentSlideIndex - 1 + currentGallery.fotos.length) % currentGallery.fotos.length;
            } else {
                currentSlideIndex = (currentSlideIndex + 1) % currentGallery.fotos.length;
            }
            
            updateSliderPosition();
            updateCounter();
        }

        // Actualizar posición del slider
        function updateSliderPosition() {
            const slider = document.getElementById('gallerySlider');
            slider.style.transform = `translateX(-${currentSlideIndex * 100}%)`;
        }

        // Actualizar contador
        function updateCounter() {
            const counter = document.getElementById('galleryCounter');
            counter.textContent = `${currentSlideIndex + 1} / ${currentGallery.fotos.length}`;
        }

        // Cargar datos de videos
        async function loadVideos() {
            try {
                const response = await fetch('../JSON/videos.json');
                videosData = await response.json();
                const videosContainer = document.getElementById('videos-gallery');
                
                if (videosData.videos && videosData.videos.length > 0) {
                    videosContainer.innerHTML = ''; // Limpiar contenedor
                    
                    videosData.videos.forEach(video => {
                        const videoCard = document.createElement('div');
                        // Determinar la clase según la orientación
                        const orientationClass = video.orientacion || 'horizontal';
                        
                        videoCard.className = `video-card ${orientationClass}`;
                        videoCard.innerHTML = `
                            <div class="video-thumbnail">
                                <img src="${video.miniatura}" alt="${video.titulo}" loading="lazy">
                                <div class="play-button" data-video-id="${video.id}">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3>${video.titulo}</h3>
                                <p>${video.descripcion}</p>
                            </div>
                        `;
                        videosContainer.appendChild(videoCard);
                    });
                    
                    // Configurar eventos para los botones de play
                    setupVideoModal();
                } else {
                    videosContainer.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">
                                <i class="fas fa-video"></i>
                            </div>
                            <h2 class="empty-title">No hay videos disponibles</h2>
                            <p class="empty-description">Actualmente no tenemos videos disponibles. Vuelve a visitarnos pronto para ver nuestra galería de videos.</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error al cargar los videos:', error);
                document.getElementById('videos-gallery').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h2 class="empty-title">Error al cargar los videos</h2>
                        <p class="empty-description">No pudimos cargar la información de videos. Por favor, intenta nuevamente más tarde.</p>
                    </div>
                `;
            }
        }

        // Controlador para videos
        function setupVideoModal() {
            const videoModal = document.getElementById('videoModal');
            const videoFrame = document.getElementById('videoFrame');
            const playButtons = document.querySelectorAll('.play-button');
            const closeVideoModal = document.querySelector('.close-video-modal');
            
            playButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const videoId = button.getAttribute('data-video-id');
                    const video = videosData.videos.find(v => v.id == videoId);
                    if (!video) return;
                    
                    // Ajustar el modal según la orientación del video
                    if (video.orientacion === 'vertical') {
                        videoModal.classList.add('vertical-video');
                    } else {
                        videoModal.classList.remove('vertical-video');
                    }
                    
                    // Configurar iframe
                    let videoUrl = video.url;
                    if (videoUrl.includes('youtube.com')) {
                        videoUrl = videoUrl.replace('watch?v=', 'embed/');
                        if (!videoUrl.includes('autoplay=1')) {
                            videoUrl += (videoUrl.includes('?') ? '&autoplay=1' : '?autoplay=1');
                        }
                    }
                    
                    videoFrame.src = videoUrl;
                    videoModal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            });
            
            closeVideoModal.addEventListener('click', () => {
                videoFrame.src = '';
                videoModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            videoModal.addEventListener('click', (e) => {
                if (e.target === videoModal) {
                    videoFrame.src = '';
                    videoModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && videoModal.classList.contains('active')) {
                    videoFrame.src = '';
                    videoModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        }

        // Animaciones al hacer scroll
        function animateOnScroll() {
            const elements = document.querySelectorAll('.about-image, .ventaja-card, .sostenibilidad-image, .gallery-card, .video-card');
            
            elements.forEach(element => {
                const elementPosition = element.getBoundingClientRect().top;
                const screenPosition = window.innerHeight / 1.2;
                
                if (elementPosition < screenPosition) {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }
            });
        };

        // Scroll suave para enlaces internos
        function setupSmoothScroll() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    if (targetId === '#inicio') {
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                        return;
                    }
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const headerHeight = document.querySelector('header').offsetHeight;
                        const targetPosition = targetElement.offsetTop - headerHeight;
                        
                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }

        // Inicializar la página
        document.addEventListener('DOMContentLoaded', () => {
            // Cargar datos
            loadPhotos();
            loadVideos();
            
            // Configurar animaciones
            document.querySelectorAll('.about-image, .ventaja-card, .sostenibilidad-image, .gallery-card, .video-card').forEach(element => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(50px)';
                element.style.transition = 'all 0.5s ease';
            });

            // Configurar eventos del modal de galería
            document.querySelector('.close-gallery-modal').addEventListener('click', closeGalleryModal);
            document.querySelector('.prev-gallery').addEventListener('click', () => navigateSlide('prev'));
            document.querySelector('.next-gallery').addEventListener('click', () => navigateSlide('next'));
            
            // Eventos de teclado para navegación de galería
            document.addEventListener('keydown', (e) => {
                const galleryModal = document.getElementById('galleryModal');
                if (galleryModal.classList.contains('active')) {
                    if (e.key === 'ArrowLeft') {
                        navigateSlide('prev');
                    } else if (e.key === 'ArrowRight') {
                        navigateSlide('next');
                    } else if (e.key === 'Escape') {
                        closeGalleryModal();
                    }
                }
            });

            window.addEventListener('scroll', animateOnScroll);
            window.addEventListener('load', animateOnScroll);

            // Configurar scroll suave
            setupSmoothScroll();
        });
    </script>
</body>
</html>